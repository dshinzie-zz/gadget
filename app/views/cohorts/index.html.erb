<!-- 

<div class="container">
  <div class="col s12 m7">

    <center><h2 class="header">Select Criteria</h2></center>
    <div class="card horizontal">
      <div class="card-stacked">
        <div class="card-content">
          <div class="row">
            <div class="col s6">
            <center><h5>Select Cohort</h5></center>
            <form action="/cohorts/verify" method="post">
              <% @cohorts.each do |cohort| %>
              <div class="col s4">

                <input class='cohort' id=<%= cohort.id %> type="checkbox" id=<%= cohort.id %> />
                <label for=<%= cohort.id %>><%= cohort.name %></label>
              </div>
             <% end %>
            </div>
            <div class="col s6">
                <center><h5>Select Critera</h5></center>
                <div class="col s6">
                  <input type="checkbox" id="github-linked" />
                  <label for="github-linked">Github Linked</label>
                </div>
                <div class="col s6">
                  <input type="checkbox" id="github-photo" />
                  <label for="github-photo">Github Photo</label>
                </div>
                <div class="col s6">
                  <input type="checkbox" id="github-name" />
                  <label for="github-name">Github Name Matches</label>
                </div>
                <div class="col s6">
                  <input type="checkbox" id="linkedin-linked" />
                  <label for="linkedin-linked">LinkedIn Linked</label>
                </div>
                <div class="col s6">
                  <input type="checkbox" id="linkedin-photo" />
                  <label for="linkedin-photo">LinkedIn Photo</label>
                </div>
                <div class="col s6">
                  <input type="checkbox" id="linkedin-name" />
                  <label for="linkedin-name">LinkedIn Name Matches</label>
                </div>
            </div>
          </div>
        <div class="card-action">
          <input class="verify" type='submit' value='submit'></input>
        </div>
        </form>
      </div>
    </div>
  </div>
</div> -->

<%= form_tag(cohorts_verify_path, method: "post") do %>
    <%= select_tag "cohorts", options_from_collection_for_select(@cohorts, "id", "name", "1"), class: "cohort-list", multiple: true %>
    <%= select_tag "criteria", options_for_select([ "Github Linked", "Github Photo", "Github Name Matches", "LinkedIn Linked", "LinkedIn Photo", "LinkedIn Name Matches"], "MasterCard"), class: "cohort-list", multiple: true %>
  <%= submit_tag 'Save' %>
<% end %>

<script type="text/javascript">
 $('.verify2').on('click', function(e) {
  var allValues = $('input')
  var cohorts = []
  var criteria = []

  for (var i=0; i < allValues.length; i++) {
    if(allValues[i].checked && allValues[i].className == "cohort"){
      cohorts.push(allValues[i].id);
    } else if (allValues[i].checked){
      criteria.push(allValues[i].parentElement.children[1].innerText);
    }
  }
  var params = [cohorts, criteria]
  $.ajax({
      url: '/cohorts/verify',
      type: 'get',
      data: {cohorts: cohorts, criteria: criteria }
    }).done(function(data){
      path = data.split("=")[1].replace("'", "").trim();
      windows.location = path;
    }).fail(function(e){
      console.log("test2");
    });
 })

</script>
